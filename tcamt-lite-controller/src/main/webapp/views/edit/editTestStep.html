<style id="antiClickjack">body {
	display: none !important;
}</style> <script type="text/javascript">if (self === top) {
		var antiClickjack = document.getElementById("antiClickjack");
		antiClickjack.parentNode.removeChild(antiClickjack);
	} else {
		top.location = self.location;
	}</script> <script type="text/ng-template" id="EditTestStepMetadata.html"><div ng-if="selectedTestStep">
		<div ng-cloak>
			<md-content>
				<md-tabs md-dynamic-height md-border-bottom md-selected="selectedTestStepTab.tabNum">
					<md-tab label="MetaData" md-on-select="initTestStepTab(0);" md-active="true">
						<md-content class="md-padding">
							<div class="row">
								<div class="col-md-12">
									<div class="col-md-6">
										<md-input-container style="width: 100%;">
											<label>Name</label>
											<input ng-model="selectedTestStep.name" ng-change="recordChanged(selectedTestStep); updateCurrentTitle('Test Step', selectedTestStep.name);" type="text"/>
										</md-input-container>
									</div>

									<div class="col-md-6">
										<md-input-container style="width: 100%;">
											<label>Description</label>
											<textarea ng-model="selectedTestStep.description" ng-change="recordChanged(selectedTestStep)"></textarea>
										</md-input-container>
									</div>
								</div>
							</div>

							<div class="row" ng-if="selectedTestPlan.type === 'Isolated'">
								<div class="col-md-12">
									<div class="col-md-6">
										<md-input-container style="width: 100%;">
											<label>Type</label>
											<md-select ng-model="selectedTestStep.type" ng-change="recordChanged(selectedTestStep);handleTestStepType();">
												<md-option value="TA_INITIATOR">(Profile Based)TA_INITIATOR</md-option>
												<md-option value="TA_RESPONDER">(Profile Based)TA_RESPONDER</md-option>
												<md-option value="SUT_INITIATOR">(Profile Based)SUT_INITIATOR</md-option>
												<md-option value="SUT_RESPONDER">(Profile Based)SUT_RESPONDER</md-option>
												<md-option value="SUT_MANUAL">SUT_MANUAL</md-option>
												<md-option value="TA_MANUAL">TA_MANUAL</md-option>
											</md-select>
										</md-input-container>
										<div ng-if="!selectedTestStep.type"><p style ="color:red;"> TestStep Type is not selected. Please check.</p></div>
										<div ng-if="selectedTestStep.type && (selectedTestStep.type === 'MANUAL' || selectedTestStep.type === 'DATAINSTANCE')"><p style ="color:red;"> TestStep Type is {{selectedTestStep.type}}, that is for DataInstance Test Plan. Please check.</p></div>
									</div>
									<div ng-if="selectedTestStep.type && selectedTestStep.type != 'DATAINSTANCE' && selectedTestStep.type != 'MANUAL'" class="col-md-3">
										<img src="images/{{selectedTestStep.type}}.png">
									</div>
									<div ng-if="selectedTestStep.type && selectedTestStep.type != 'DATAINSTANCE' && selectedTestStep.type != 'MANUAL'" class="col-md-3">
										<p ng-if="selectedTestStep.type === 'TA_INITIATOR'"><strong>TA_INITIATOR</strong> Test Step Type is used when a test message is generated by the TA and “imported” into the SUT to be processed (consumed); a manual assessment of the SUT’s capability is performed by a human Tester using a checklist (e.g., a juror document) created from a set of conformance rules.</p>
										<p ng-if="selectedTestStep.type === 'TA_RESPONDER'"><strong>TA_RESPONDER</strong> Test Step Type is used when a response test message is generated by the TA and “imported” into the SUT to be processed (consumed); a manual assessment of the SUT’s capability is performed by a human Tester using a checklist (e.g., a juror document) created from a set of conformance rules.</p>
										<p ng-if="selectedTestStep.type === 'SUT_INITIATOR'"><strong>SUT_INITIATOR</strong> Test Step Type is used when a test message is generated by the SUT and “imported” into the TA for automated assessment against a set of conformance rules.</p>
										<p ng-if="selectedTestStep.type === 'SUT_RESPONDER'"><strong>SUT_RESPONDER</strong> Test Step Type is used when an acknowledgement or response test message is generated by the SUT and ”imported” into the TA for automated assessment against a set of conformance rules.</p>
										<p ng-if="selectedTestStep.type === 'SUT_MANUAL'"><strong>SUT_MANUAL</strong> Test Step Type is used for creating a Test Step that provides instructions to a Tester for test steps associated with SUT_INITIATOR and SUT_RESPONDER Test Step Types.</p>
										<p ng-if="selectedTestStep.type === 'TA_MANUAL'"><strong>TA_MANUAL</strong> Test Step Type is used for creating a Test Step that provides test procedure instructions to the Tester for test steps associated with the TA_INITIATOR and TA_RESPONDER Test Step Types. No HL7 v2 transaction components (e.g., HL7 Encoded Message) are required for this Test Step Type.</p>

									</div>
								</div>
							</div>

							<div class="row" ng-if="selectedTestPlan.type === 'DataInstance'">
								<div class="col-md-12">
									<div class="col-md-6">
										<md-input-container style="width: 100%;">
											<label>Type</label>
											<md-select ng-model="selectedTestStep.type" ng-change="recordChanged(selectedTestStep);handleTestStepType();">
												<md-option value="DATAINSTANCE">Profile Based</md-option>
												<md-option value="MANUAL">MANUAL</md-option>
											</md-select>
										</md-input-container>
										<div ng-if="!selectedTestStep.type"><p style ="color:red;"> TestStep Type is not selected. Please check.</p></div>
										<div ng-if="selectedTestStep.type && (selectedTestStep.type === 'TA_INITIATOR' || selectedTestStep.type === 'TA_RESPONDER' || selectedTestStep.type === 'SUT_INITIATOR' || selectedTestStep.type === 'SUT_RESPONDER' || selectedTestStep.type === 'SUT_MANUAL' || selectedTestStep.type === 'TA_MANUAL')"><p style ="color:red;"> TestStep Type is {{selectedTestStep.type}}, that is for Isolated Test Plan. Please check.</p></div>
									</div>
									<div ng-if="selectedTestStep.type && selectedTestStep.type === 'MANUAL'" class="col-md-3">
										<img src="images/{{selectedTestStep.type}}.png">
									</div>
									<div ng-if="selectedTestStep.type && selectedTestStep.type === 'MANUAL'" class="col-md-3">
										<p><strong>MANUAL</strong> Test Step Type is used for creating a Test Step that provides instructions to a Tester for test steps associated with the Profile Based Test Step Type.</p>
									</div>

									<div ng-if="selectedTestStep.type && selectedTestStep.type === 'DATAINSTANCE'" class="col-md-3">
										<img src="images/{{selectedTestStep.type}}.png">
									</div>
									<div ng-if="selectedTestStep.type && selectedTestStep.type === 'DATAINSTANCE'" class="col-md-3">
										<p><strong>Profile Based</strong> Test Step Type is used when a test message is generated by the SUT and “imported” into the TA for automated assessment against a set of conformance rules.</p>
									</div>
								</div>
							</div>

							<div class="row" ng-if="isNotManualTestStep()">
								<div class="col-md-12" style="margin-top:35px">
									<div class="col-md-6">
										<md-input-container style="width: 100%;">
											<label>Message Profile*</label>
											<md-select ng-model="selectedTestStep.profileIds" ng-change="assignProfile();recordChanged(selectedTestStep);">
												<md-optgroup label="{{ip.integrationProfileMetaData.name}}" ng-repeat="ip in integrationAbstractProfiles">
													<md-option ng-value="cp.id+'@'+ip.id" ng-repeat="cp in ip.conformanceProfileMetaDataSet">{{cp.name}} [{{cp.type}}^{{cp.event}}^{{cp.structId}}, {{cp.identifier}}]</md-option>
												</md-optgroup>
											</md-select>
											<span ng-if="!selectedTestStep.conformanceProfileId" style="color: red">Message Profile is required!</span>
											<span ng-if="selectedTestStep.conformanceProfileId" style="color: grey">in {{getIntegrationProfileName()}}</span>
										</md-input-container>

									</div>

									<div class="col-md-6">
									</div>
								</div>

								<div class="col-md-12">
									<div class="col-md-6">
										<md-input-container style="width: 100%;">
											<label>Test Data Specification</label>
											<md-select ng-model="selectedTestStep.tdsXSL" ng-change="recordChanged(selectedTestStep);">
												<md-option value="">No Test Data Specification</md-option>
												<md-option value="Basic-TestDataSpecification">Basic TestDataSpecification</md-option>
												<md-option value="VRDR-TestDataSpecification">VRDR-TestDataSpecification</md-option>
											</md-select>
										</md-input-container>
									</div>

									<div class="col-md-6">
										<md-input-container style="width: 100%;">
											<label>Juror Document</label>
											<md-select ng-model="selectedTestStep.jdXSL" ng-change="recordChanged(selectedTestStep);">
												<md-option value="">No Juror Document</md-option>
												<md-option value="Superset-JurorDocument">Superset Juror Document</md-option>
												<md-option value="Z23-JurorDocument">Z23 Juror Document</md-option>
												<md-option value="Z32-Z33-Z42-JurorDocument">Z32-Z33-Z42 Juror Document</md-option>
												<md-option value="IZ52-IZ33NF-IZ33TM-IZ33PD-JurorDocument">IZ52-IZ33NF-IZ33TM-IZ33PD Juror Document for 2.8.2</md-option>
											</md-select>
										</md-input-container>
									</div>
								</div>
							</div>
						</md-content>
					</md-tab>
					<md-tab label="Test Story">
						<md-content class="md-padding">
							<div class="row">
								<md-input-container style="width: 100%;">
									<label>TestStep Test Story Template</label>
									<md-select ng-model="selectedTestStep.testStoryConfigId" ng-change="recordChanged(selectedTestStep);updateTestStoryConfigForTestStep();">
										<md-option ng-value="config.id" ng-repeat="config in testStoryConfigs track by config.id">{{::config.name}}</md-option>
									</md-select>
								</md-input-container>
								<uib-accordion close-others="true">
									<uib-accordion-group  ng-repeat ="entry in selectedTestStep.testStoryConfig.testStoryConfig track by entry.id" ng-init="status = {isOpen: false}" is-open="status.isOpen" ng-if="entry.present" >
										<uib-accordion-heading>
											<span style="color: white !important;">
												<i class="fa" ng-class="{'fa-caret-down': status.isOpen, 'fa-caret-right': !status.isOpen}"></i>
											{{::entry.title}}
											</span>
										</uib-accordion-heading>
										<div class="col-md-12">
											<textarea froala="froalaEditorOptions" ng-change="froalaChange(selectedTestStep.testStoryContent[entry.id],selectedTestStep)" name="teststorydesc" ng-model="selectedTestStep.testStoryContent[entry.id]"></textarea>
										</div>
									</uib-accordion-group>
								</uib-accordion>
							</div>
						</md-content>
					</md-tab>
					<md-tab ng-disabled="!isNotManualTestStep();" md-on-select="initTestStepTab(2);" label="HL7 Encoded Message">
						<md-content class="md-padding">
							<div class="col-md-12">
								<span class="pull-left">
									<button type="button" class="btn btn-info btn-sm" ng-click="openCreateEr7TemplateModal()"><i class="fa fa-plus"></i>
                        				New ER7 Message Template
                    				</button>
								</span>
							</div>
							<div class="col-md-12">
								<textarea rows="10" type="cb" class="form-control" id="er7-textarea"
							  		ng-model="selectedTestStep.er7Message"
							  		wrap="off" style="overflow:auto;"/>
							</div>
						</md-content>
					</md-tab>
					<md-tab ng-disabled="!isNotManualTestStep()" md-on-select="initTestStepTab(3);" label="Test Data">
						<div class="col-md-12" ng-if="!hasValidEr7Message()"><p style ="color:red;"> HL7 Encoded Message is not processable. Please check.</p></div>

						<md-content ng-if="hasValidEr7Message()" class="md-padding">
							<div class="row">
								<div class="col-md-6">
									<span class="pull-left">
										<button type="button" class="btn btn-info btn-sm" ng-click="openCreateMessageTemplateModal()"><i class="fa fa-plus"></i>
											New TestData Categorization Template For Message
                    					</button>

										<!--<button type="button" class="btn btn-info btn-sm" ng-click="openOrderIndifferentTab()"><i class="fa fa-plus"></i>-->
											<!--Create Order-Indifferent Pattern-->
                    					<!--</button>-->
									</span>
								</div>
								<div class="col-md-6">
									<span class="pull-right">
										<div class="btn-group btn-group-sm" data-toggle="buttons">
    										<label class="btn btn-primary btn-xs" ng-click="changeUsageFilter();refreshTree();refreshPropfileTree(); " ng-class="{'active':usageViewFilter === 'All'}">
        										<input type="radio">All Usages</input>
											</label>
											<label class="btn btn-primary btn-xs" ng-click="changeUsageFilter();refreshTree();refreshPropfileTree();" ng-class="{'active':usageViewFilter === 'RREC'}">
        										<input type="radio">R/RE/C Only</input>
											</label>
   										</div>
									</span>
								</div>
							</div>
							<div class="row">
								<uib-accordion close-others="false">
									<uib-accordion-group is-open="testDataAccordi.segmentList">
										<uib-accordion-heading>
											<span ng-click="segmentListAccordionClicked()" style="color:white !important;">
												<i class="fa" ng-class="{'fa-caret-down': testDataAccordi.segmentList, 'fa-caret-right': !testDataAccordi.segmentList}"></i>
												<i class="fa fa-file-text-o fa-fw"></i> Segments List
											</span>
										</uib-accordion-heading>
										<div ng-if="testDataAccordi.segmentList" class="col-md-12">
											<div class="table-responsive">


												<table st-table="display_segments" st-safe-src="segmentList" class="table table-striped table-bordered">
													<thead>
													<tr class="tbl-header">
														<th class="col-md-2">Path</th>
														<th class="col-md-7">Line</th>
														<th class="col-md-2">Usage</th>
														<th class="col-md-1">Action</th>
													</tr>
													</thead>
													<tbody>
													<tr st-select-row="segment" st-select-mode="multiple" ng-repeat="segment in display_segments | filter:filterForSegmentList">
														<td class="col-md-2">
															{{::segment.iPath}}
														</td>
														<td class="col-md-7">
															<textarea disabled class="form-control">{{::segment.lineStr}}</textarea>
														</td>
														<td class="col-md-2">
															{{::segment.usagePath}}
														</td>
														<td class="col-md-1">
															<button title="Select Segment"
																	type="button" class="btn btn-primary btn-xs" ng-click="selectSegment(segment)">
																<span><i class="fa fa-pencil fa-fw"></i> Select</span>
															</button>
														</td>
													</tr>
													</tbody>
												</table>
											</div>
										</div>
									</uib-accordion-group>

									<uib-accordion-group is-open="testDataAccordi.selectedSegment">
										<uib-accordion-heading>
											<span ng-click="segmentAccordionClicked()" style="color: white !important;">
												<i class="fa" ng-class="{'fa-caret-down': testDataAccordi.selectedSegment, 'fa-caret-right': !testDataAccordi.selectedSegment}"></i>
												<i class="fa fa-pencil fa-fw"></i> Selected Segment
											</span>
										</uib-accordion-heading>
										<div class="col-md-12" ng-if="!selectedSegmentNode || !testDataAccordi.selectedSegment"><p style ="color:red;"> No Segment Selected</p></div>

										<div class="col-md-12" ng-if="selectedSegmentNode && testDataAccordi.selectedSegment">
											<div class="row">
												<span class="pull-left">
													<button type="button" class="btn btn-info btn-sm" ng-click="openCreateSegmentTemplateModal()"><i class="fa fa-plus"></i>
                        								New TestData Categorization Template For Segment
                    								</button>
													<button type="button" class="btn btn-info btn-sm" ng-click="openCreateEr7SegmentTemplateModal()"><i class="fa fa-plus"></i>
                        								New ER7 Segment Line Template
                    								</button>
												</span>

												<span class="pull-right">
													<span ng-dropdown-multiselect="" options="colsData" selected-model="selectedCols" extra-settings="smartButtonSettings"></span>
												</span>
											</div>
											<div class="row">
												<div class="col-md-2">
													<label class="control-label">Selected Segment:</label>
												</div>
												<div class="col-md-10">
													<input class="form-control" type="text" disabled ng-model="selectedSegmentNode.iPath" />
												</div>
											</div>

											<div class="row">
												<div class="col-md-2">
													<label class="control-label">Line String:</label>
												</div>
												<div class="col-md-10">
													<textarea class="form-control" ng-model="selectedSegmentNode.segmentStr" disabled></textarea>
												</div>
											</div>

											<div class="row" ng-if="retrieveTriggers && retrieveTriggers.length > 0">
												<div class="col-md-2">
													<label class="control-label">Trigger Info:</label>
												</div>
												<div class="col-md-10">
													<div class="table-responsive">
														<table class="table table-bordered table-condensed profile-table">
															<thead>
															<tr class="tbl-header">
																<th class="col-md-3">OrderIndifferent Node</th>
																<th class="col-md-6">Trigger Conditions</th>
																<th class="col-md-3">Edit Trigger</th>
															</tr>
															</thead>
															<tbody>
															<tr ng-repeat="orderIndifferentInfo in retrieveTriggers">
																<td>{{orderIndifferentInfo.currentIPath}}</td>
																<td>
																	<div ng-if="orderIndifferentInfo && orderIndifferentInfo.triggerInfo && orderIndifferentInfo.triggerInfo.list" ng-repeat="triggerInfo in orderIndifferentInfo.triggerInfo.list">
																		<li>
																			<span ng-if="orderIndifferentInfo.triggerInfo.type !== 'local'" class="label label-success label-icon ">Primary</span>
																			<span ng-if="orderIndifferentInfo.triggerInfo.type === 'local'" class="label label-info label-icon ">Secondary</span>
																			{{orderIndifferentInfo.currentIPath}}.{{triggerInfo.namePath}} = {{retrieveValue(orderIndifferentInfo, triggerInfo)}}
																		</li>
																	</div>
																	<div>
																		<span ng-repeat="error in checkTriggerError(orderIndifferentInfo)" style="color: red"><i class="fa fa-exclamation-triangle fa-fw"></i>{{error}}</span>
																	</div>
																</td>
																<td>
																	<span ng-if="orderIndifferentInfo.triggerInfo.type !== 'local'" ng-click="openSpecificTriggerDialog(orderIndifferentInfo)" class="label label-segment label-icon"><i class="fa fa-plus-circle fa-fw"></i>Create Secondary Trigger</span>
																	<span ng-if="orderIndifferentInfo.triggerInfo.type === 'local'" ng-click="openSpecificTriggerDialog(orderIndifferentInfo)" class="label label-segment label-icon"><i class="fa fa-pencil fa-fw"></i>Edit Secondary Trigger</span>
																	<span ng-if="orderIndifferentInfo.triggerInfo.type === 'local'" ng-click="removeSpecificTriggerCondition(orderIndifferentInfo)" class="label label-field label-icon"><i class="fa fa-times-circle fa-fw"></i>Remove Secondary Trigger</span>
																</td>
															</tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
											<div class="col-md-12">
										<div layout="row" layout-align="center center">
										<div class="btn-group btn-group-sm" data-toggle="buttons">
    										<label class="btn btn-primary btn-xs" ng-click="expandAll()" ng-class="{'active':expanded}">
												Expand All
											</label>
											<label class="btn btn-primary btn-xs" ng-click="collapseAll()" ng-class="{'active':!expanded}">
        										Collapse All
											</label>
   										</div>
										   </div>
												<div class="table-responsive">
													<table tt-table tt-params="segmentParams" class="table table-bordered table-condensed profile-table" id="segmentTable">
														<thead>
														<tr class="tbl-header">
															<th class="col-md-3">Path</th>
															<th class="col-md-3">Name</th>
															<th class="col-md-1" ng-if="isShow(1)">DT</th>
															<th class="col-md-1" ng-if="isShow(2)">Usage</th>
															<th class="col-md-1" ng-if="isShow(3)">Cardi.</th>
															<th class="col-md-1" ng-if="isShow(4)">Length</th>
															<th class="col-md-1" ng-if="isShow(5)">ValueSet</th>
															<th class="col-md-1" ng-if="isShow(6)">Predicate</th>
															<th class="col-md-3">Value</th>
															<th class="col-md-3">Test Data Cate.</th>
															<th class="col-md-1">Order Indifferent</th>
														</tr>
														</thead>
														<tbody></tbody>
													</table>
												</div>
											</div>
										</div>
									</uib-accordion-group>

									<uib-accordion-group is-open="testDataAccordi.constraintList">
										<uib-accordion-heading>
											<span ng-click="constraintAccordionClicked()" style="color: white !important;">
												<i class="fa" ng-class="{'fa-caret-down': testDataAccordi.constraintList, 'fa-caret-right': !testDataAccordi.constraintList}"></i>
												<i class="fa fa-file-text-o fa-fw"></i> TestData Categorization List
											</span>
										</uib-accordion-heading>
										<div ng-if="testDataAccordi.constraintList" class="col-md-12">
											<div class="table-responsive">
												<table st-table="displayedCollection" st-safe-src="listOfTDC"  class="table table-striped table-bordered">
													<thead>
													<tr class="tbl-header">
														<th class="col-md-2" st-sort="iPath">Path</th>
														<th class="col-md-2" st-sort="name">Name</th>
														<th class="col-md-2" st-sort="testDataCategorization">TestData Categorization</th>
														<th class="col-md-2" >Data</th>
														<th class="col-md-4">Constraints</th>
													</tr>
													</thead>
													<tbody>
													<tr ng-repeat="cate in displayedCollection">
														<td class="col-md-2">
															{{::cate.iPath}}
														</td>
														<td class="col-md-2">
															{{::cate.name}}
														</td>
														<td class="col-md-2">
															{{::cate.testDataCategorization}}
														</td>
														<td class="col-md-2">
															<span ng-if="cate.testDataCategorization != 'Value-Test Case Fixed List'">{{::cate.data}}</span>
															<span ng-if="cate.testDataCategorization == 'Value-Test Case Fixed List'">{{::cate.listData}}</span>
														</td>
														<td class="col-md-4">
															<li ng-repeat="c in cate.constraints">{{::c}}</li>
														</td>
													</tr>
													</tbody>
												</table>
											</div>
										</div>
									</uib-accordion-group>
									<uib-accordion-group is-open="testDataAccordi.constraintEditorTab">
										<uib-accordion-heading>
											<span ng-click="orderIndifferentConstraintsAccordionClicked()" style="color: white !important;">
												<i class="fa" ng-class="{'fa-caret-down': testDataAccordi.constraintEditorTab, 'fa-caret-right': !testDataAccordi.constraintEditorTab}"></i>
												<i class="fa fa-file-text-o fa-fw"></i> Order-Indifferent Constraints setting
											</span>
										</uib-accordion-heading>
										<div ng-if="testDataAccordi.constraintEditorTab" class="col-md-12">
											<div class="table-responsive">
												<table tt-table tt-params="profileParams" class="table table-bordered table-condensed profile-table" id="profileTable">
													<thead>
													<tr class="tbl-header">
														<th class="col-md-3">Name</th>
														<th class="col-md-1">Usage</th>
														<th class="col-md-1">Cardi.</th>
														<th class="col-md-1">OrderIndifferent</th>
														<th class="col-md-6">Trigger Condition</th>
													</tr>
													</thead>
													<tbody></tbody>
												</table>
											</div>
										</div>
									</uib-accordion-group>
								</uib-accordion>
							</div>
						</md-content>
					</md-tab>
					<md-tab ng-disabled="!isNotManualTestStep()" md-on-select="initTestStepTab(4);" label="Validation">
						<md-content class="md-padding">
							<div layout="row">
								<md-radio-group ng-model="context" style="margin-top: 11px;">
									<md-radio-button ng-value="'free'" class="md-primary" style="display: inline-block; margin-right: 9px;">
										Context Free
									</md-radio-button>
									<md-radio-button ng-value="'based'" class="md-primary" style="display: inline-block">
										Context Based
									</md-radio-button>
								</md-radio-group>
								<md-button class="btn btn-primary" style="margin-left: 100px;" ng-click="validate(context)">
									Validate
								</md-button>
							</div>
							<div class="row">
								<div class="panel panel-warning">
									<div class="panel-heading panel-heading-collapsable" style="background-color:#395286;">
										<i class="glyphicon glyphicon-list"></i>
										<span>
											<strong >Message Content</strong>
											<a style="color:white !important">
												<span class="pull-right" title="Load Initial Message" ng-click="initHL7EncodedMessageForOnlineValidationTab();">
													<strong>
														<i class="fa fa-refresh" aria-hidden="true"></i>
														<span style="margin-left:3px;">Reload</span>
													</strong>
												</span>
											</a>
										</span>
									</div>
									<div class="panel-body">
										<div class="toc-container">
											<textarea ng-if="!refreshingMessage" rows="10" type="cb" class="form-control" id="er7-textarea-validation"
													  ng-model="er7MessageOnlineValidation"
													  wrap="off" style="overflow:auto;"/>
										</div>
									</div>
								</div>
								<div class="panel panel-warning">
									<div class="panel-heading panel-heading-collapsable" style="background-color:#395286;">
										<span>
											<strong>Validation Result
												<span ng-if="context=='free'||context=='based'" style="font-style:italic;">: Context-{{context}}</span>
											</strong>
											<a style="color:white !important">
												<span class="pull-right" title="View Result Categories" ng-click="showValidationInfo()">
													<strong><i class="fa fa-info-circle" style="margin-right:3px;"></i>Help</strong>
												</span>
											</a>
										</span>
									</div>
									<div class="panel-body" ng-if="contextValidation">
										<div ng-if="validationError" class="alert alert-danger ng-binding" role="validationError">
											<strong>Cannot validate this message:</strong>
											<br/>
											Reason :{{::validationError}}
										</div>
										<div ng-if="!loadingv&&!validationError">
											<button ng-if="report" class="pull-right" title="View Result Categories" ng-click="showReport()">
												<strong><i class="fa fa-eye"></i> Report</strong>
											</button>
											<ng-include src="validationView"></ng-include>
										</div>
										<div ng-if="loadingv">
											Performing <span style="font-style:italic;">Context-{{::context}}</span> Validation ...
										</div>
									</div>
								</div>
							</div>
						</md-content>
					</md-tab>
					<md-tab ng-disabled="!isNotManualTestStep()" md-on-select="initTestStepTab(5);" label="STD/NIST XML">
						<div class="col-md-12" ng-if="!hasValidEr7Message()"><p style ="color:red;"> HL7 Encoded Message is not processable. Please check.</p></div>
						<md-content ng-if="hasValidEr7Message()" class="md-padding">
							<div class="row">
								<uib-accordion close-others="true">
									<uib-accordion-group  is-open="nistStd.nist">
										<uib-accordion-heading>
											<span style="color: white !important;">
												<i class="fa" ng-class="{'fa-caret-down': nistStd.nist, 'fa-caret-right': !nistStd.nist}"></i>
								 				NIST XML
											</span>
										</uib-accordion-heading>
										<textarea style="width:100%" ng-model="nistXMLCode" readonly rows="30"/>
									</uib-accordion-group>
									<uib-accordion-group is-open="nistStd.std">
										<uib-accordion-heading>
											<span style="color: white !important;">
												<i class="fa" ng-class="{'fa-caret-down': nistStd.std, 'fa-caret-right': !nistStd.std}"></i>
								 				STD XML
											</span>
										</uib-accordion-heading>
										<textarea style="width:100%" ng-model="stdXMLCode"  readonly rows="30"/>
									</uib-accordion-group>
								</uib-accordion>
							</div>
						</md-content>
					</md-tab>
					<md-tab ng-disabled="!isNotManualTestStep()" md-on-select="initTestStepTab(6);" label="Supplement Documents">
						<div class="col-md-12" ng-if="!hasValidEr7Message()"><p style ="color:red;"> HL7 Encoded Message is not processable. Please check.</p></div>
						<md-content ng-if="hasValidEr7Message()" class="md-padding">
							<div class="row">
								<uib-accordion close-others="true">
									<uib-accordion-group  is-open="DocAccordi.messageContents">
										<uib-accordion-heading>
											<span style="color: white !important;">
												<i class="fa" ng-class="{'fa-caret-down': DocAccordi.messageContents, 'fa-caret-right': !DocAccordi.messageContents}"></i>
												Message Content
											</span>
										</uib-accordion-heading>
										<div dynamic="messageContentsHTML"></div>
									</uib-accordion-group>
									<uib-accordion-group  is-open="DocAccordi.testdata">
										<uib-accordion-heading>
											<span style="color: white !important;">
												<i class="fa" ng-class="{'fa-caret-down': DocAccordi.testdata, 'fa-caret-right': !DocAccordi.testdata}"></i>
												Test Data Specification
											</span>
										</uib-accordion-heading>
										<div layout="row" layout-align="end center">
										<div>
										<md-input-container style="width: 100%;">
											<label>Test Data Specification</label>
											<md-select ng-model="selectedTestStep.tdsXSL" ng-change="recordChanged(selectedTestStep); initTestStepTab(6);">
												<md-option value="">No Test Data Specification</md-option>
												<md-option value="Basic-TestDataSpecification">Basic TestDataSpecification</md-option>
												<md-option value="VRDR-TestDataSpecification">VRDR-TestDataSpecification</md-option>
											</md-select>
										</md-input-container>
										</div>
										</div>
										<div dynamic="testDataSpecificationHTML"></div>
									</uib-accordion-group>

									<uib-accordion-group  is-open="DocAccordi.jurorDocument">
										<uib-accordion-heading>
											<span style="color: white !important;">
												<i class="fa" ng-class="{'fa-caret-down': DocAccordi.jurorDocument, 'fa-caret-right': !DocAccordi.jurorDocument}"></i>
								 				Juror Document
											</span>
										</uib-accordion-heading>
										<div layout="row" layout-align="end center">
												<div>
											<md-input-container style="width: 100%;">
											<label>Juror Document</label>
											<md-select ng-model="selectedTestStep.jdXSL" ng-change="recordChanged(selectedTestStep); initTestStepTab(6)">
												<md-option value="">No Juror Document</md-option>
												<md-option value="Superset-JurorDocument">Superset Juror Document</md-option>
												<md-option value="Z23-JurorDocument">Z23 Juror Document</md-option>
												<md-option value="Z32-Z33-Z42-JurorDocument">Z32-Z33-Z42 Juror Document</md-option>
												<md-option value="IZ52-IZ33NF-IZ33TM-IZ33PD-JurorDocument">IZ52-IZ33NF-IZ33TM-IZ33PD Juror Document for 2.8.2</md-option>
											</md-select>
										</md-input-container>
										</div>
										</div>
										<ng-bind-html ng-bind-html="jurorDocumentsHTML"/>
									</uib-accordion-group>
								</uib-accordion>
							</div>
						</md-content>
					</md-tab>
				</md-tabs>
			</md-content>
		</div>
	</div></script> <script type="text/ng-template" id="Group.html"><tr tt-node is-branch="hasChildren(node)">
		<td class="col-md-3">
			<span class="label label-info label-icon">G</span> {{getGroupName(node.name)}}
		</td>
		<td class="col-md-1">
			{{::node.usage}}
		</td>
		<td class="col-md-1">
			[{{::node.min}}..{{::node.max}}]
		</td>
		<td class="col-md-1">
			<div ng-show="node.max !== '1' &&  node.max !== '0'">
				<input type="checkbox" ng-model="node.orderIndifferentInfo.orderSpecific">
			</div>
		</td>
		<td class="col-md-6">
			<div ng-if="node.orderIndifferentInfo && node.orderIndifferentInfo.orderSpecific === true && node.orderIndifferentInfo.triggerInfo.description">
				<span ng-click="openTriggerDialog(node)">{{node.orderIndifferentInfo.triggerInfo.description}} <i class="fa fa-pencil fa-fw"></i></span>

				<div ng-if="node.orderIndifferentInfo.triggerInfo.description !== 'Trigger is not set'" class="table-responsive">
					<table class="table table-bordered table-condensed profile-table">
						<thead>
						<tr class="tbl-header">
							<th class="col-md-3">OrderIndifferent Node</th>
							<th class="col-md-6">Trigger Conditions</th>
							<th class="col-md-3">Edit Trigger</th>
						</tr>
						</thead>
						<tbody>

						<div x="{{myList = findRelatedSegmentInstancePaths(node, segmentList)}}">
							<tr ng-repeat="item in myList">
								<td>
									<span ng-click="selectSegmentByPath(item.split('^')[1])">{{item.split('^')[1]}}</span>
								</td>
								<td>
									<div y="{{orderIndifferentInfo = retrieveTriggerInfoForSpecificNodeByPath(item.split('^')[1])}}">
										<div ng-if="orderIndifferentInfo && orderIndifferentInfo.triggerInfo && orderIndifferentInfo.triggerInfo.list" ng-repeat="triggerInfo in orderIndifferentInfo.triggerInfo.list">
											<li>
												<span ng-if="orderIndifferentInfo.triggerInfo.type !== 'local'" class="label label-success label-icon ">Primary</span>
												<span ng-if="orderIndifferentInfo.triggerInfo.type === 'local'" class="label label-info label-icon ">Secondary</span>
												{{orderIndifferentInfo.currentIPath}}.{{triggerInfo.namePath}} = {{retrieveValue(orderIndifferentInfo, triggerInfo)}}
											</li>
										</div>
										<span ng-repeat="error in checkTriggerError(orderIndifferentInfo)" style="color: red"><i class="fa fa-exclamation-triangle fa-fw"></i>{{error}}</span>
									</div>
								</td>
								<td>
									<div y="{{orderIndifferentInfo = retrieveTriggerInfoForSpecificNodeByPath(item.split('^')[1])}}">
										<span ng-if="orderIndifferentInfo.triggerInfo.type !== 'local'" ng-click="openSpecificTriggerDialog(orderIndifferentInfo)" class="label label-segment label-icon"><i class="fa fa-plus-circle fa-fw"></i>Create Secondary Trigger</span>
										<span ng-if="orderIndifferentInfo.triggerInfo.type === 'local'" ng-click="openSpecificTriggerDialog(orderIndifferentInfo)" class="label label-segment label-icon"><i class="fa fa-pencil fa-fw"></i>Edit Secondary Trigger</span>
										<span ng-if="orderIndifferentInfo.triggerInfo.type === 'local'" ng-click="removeSpecificTriggerCondition(orderIndifferentInfo);" class="label label-field label-icon"><i class="fa fa-times-circle fa-fw"></i>Remove Secondary Trigger</span>
									</div>
								</td>
							</tr>
						</div>

						</tbody>
					</table>
				</div>
			</div>
			<div ng-show="node.orderIndifferentInfo && node.orderIndifferentInfo.orderSpecific === true && !node.orderIndifferentInfo.triggerInfo.description">
				<span ng-click="openTriggerDialog(node)"><i class="fa fa-pencil fa-fw"></i> Create Trigger</span>
			</div>
		</td>
	</tr></script> <script type="text/ng-template" id="Segment.html"><tr tt-node is-branch="hasChildren(node)">
		<td class="col-md-3">
			<span class="label label-segment label-icon">S</span> {{getSegmentNameByRef(node.ref)}}
		</td>
		<td class="col-md-1">
			{{::node.usage}}
		</td>
		<td class="col-md-1">
			[{{::node.min}}..{{::node.max}}]
		</td>
		<td class="col-md-1">
			<div ng-show="node.max !== '1' &&  node.max !== '0'">
				<input type="checkbox" ng-model="node.orderIndifferentInfo.orderSpecific">
			</div>
		</td>
		<td class="col-md-6">
			<div ng-if="node.orderIndifferentInfo && node.orderIndifferentInfo.orderSpecific === true && node.orderIndifferentInfo.triggerInfo.description">
				<span ng-click="openTriggerDialog(node)">{{node.orderIndifferentInfo.triggerInfo.description}} <i class="fa fa-pencil fa-fw"></i></span>

				<div ng-if="node.orderIndifferentInfo.triggerInfo.description !== 'Trigger is not set'" class="table-responsive">
					<table class="table table-bordered table-condensed profile-table">
						<thead>
						<tr class="tbl-header">
							<th class="col-md-3">OrderIndifferent Node</th>
							<th class="col-md-6">Trigger Conditions</th>
							<th class="col-md-3">Edit Trigger</th>
						</tr>
						</thead>
						<tbody>

						<div x="{{myList = findRelatedSegmentInstancePaths(node, segmentList)}}">
							<tr ng-repeat="item in myList">
								<td>
									<span ng-click="selectSegmentByPath(item.split('^')[1])">{{item.split('^')[1]}}</span>
								</td>
								<td>
									<div y="{{orderIndifferentInfo = retrieveTriggerInfoForSpecificNodeByPath(item.split('^')[1])}}">
										<div ng-if="orderIndifferentInfo && orderIndifferentInfo.triggerInfo && orderIndifferentInfo.triggerInfo.list" ng-repeat="triggerInfo in orderIndifferentInfo.triggerInfo.list">
											<li>
												<span ng-if="orderIndifferentInfo.triggerInfo.type !== 'local'" class="label label-success label-icon ">Primary</span>
												<span ng-if="orderIndifferentInfo.triggerInfo.type === 'local'" class="label label-info label-icon ">Secondary</span>
												{{orderIndifferentInfo.currentIPath}}.{{triggerInfo.namePath}} = {{retrieveValue(orderIndifferentInfo, triggerInfo)}}
											</li>
										</div>
										<span ng-repeat="error in checkTriggerError(orderIndifferentInfo)" style="color: red"><i class="fa fa-exclamation-triangle fa-fw"></i>{{error}}</span>
									</div>
								</td>
								<td>
									<div y="{{orderIndifferentInfo = retrieveTriggerInfoForSpecificNodeByPath(item.split('^')[1])}}">
										<span ng-if="orderIndifferentInfo.triggerInfo.type !== 'local'" ng-click="openSpecificTriggerDialog(orderIndifferentInfo)" class="label label-segment label-icon"><i class="fa fa-plus-circle fa-fw"></i>Create Secondary Trigger</span>
										<span ng-if="orderIndifferentInfo.triggerInfo.type === 'local'" ng-click="openSpecificTriggerDialog(orderIndifferentInfo)" class="label label-segment label-icon"><i class="fa fa-pencil fa-fw"></i>Edit Secondary Trigger</span>
										<span ng-if="orderIndifferentInfo.triggerInfo.type === 'local'" ng-click="removeSpecificTriggerCondition(orderIndifferentInfo);" class="label label-field label-icon"><i class="fa fa-times-circle fa-fw"></i>Remove Secondary Trigger</span>
									</div>
								</td>
							</tr>
						</div>

						</tbody>
					</table>
				</div>
			</div>
			<div ng-show="node.orderIndifferentInfo && node.orderIndifferentInfo.orderSpecific === true && !node.orderIndifferentInfo.triggerInfo.description">
				<span ng-click="openTriggerDialog(node)"><i class="fa fa-pencil fa-fw"></i> Create Trigger</span>
			</div>
		</td>
	</tr></script> <script type="text/ng-template" id="TriggerGroup.html"><tr tt-node is-branch="hasChildren(node)">
		<td class="col-md-3">
			<span class="label label-info label-icon">G</span> {{getGroupName(node.name)}}
		</td>
		<td class="col-md-1">
			{{::node.usage}}
		</td>
		<td class="col-md-1">
			[{{::node.min}}..{{::node.max}}]
		</td>
		<td class="col-md-1">
		</td>
		<td class="col-md-1">
		</td>
		<td class="col-md-1">
		</td>
	</tr></script> <script type="text/ng-template" id="TriggerSegment.html"><tr tt-node is-branch="hasChildren(node)">
		<td class="col-md-3">
			<span class="label label-segment label-icon">S</span> {{getSegmentByRef(node.ref).label}}
		</td>
		<td class="col-md-1">
			{{::node.usage}}
		</td>
		<td class="col-md-1">
			[{{::node.min}}..{{::node.max}}]
		</td>
		<td class="col-md-1">
		</td>
		<td class="col-md-1">
		</td>
		<td class="col-md-1">
		</td>
	</tr></script> <script type="text/ng-template" id="TriggerField.html"><tr tt-node is-branch="hasChildren(node)">
		<td class="col-md-3">
			<span class="label label-field label-icon">F</span> {{node.position}}. {{::node.name}}
		</td>
		<td class="col-md-1">
			{{::node.usage}}
		</td>
		<td class="col-md-1">
			[{{::node.min}}..{{::node.max}}]
		</td>
		<td class="col-md-1">
			{{::node.datatypeId}}
		</td>
		<td class="col-md-1">
			[{{::node.minLength}}..{{::node.maxLength}}]
		</td>
		<td class="col-md-1">
			<div ng-if="!hasChildren(node)">
				<div ng-if="isSelectedNodeForTrigger(node.path)">
					<span ng-click="unselectNodeForTrigger(node.path)"><i class="fa fa-check-circle"></i> Selected</span>
				</div>
				<div ng-if="!isSelectedNodeForTrigger(node.path)">
					<span ng-click="selectNodeForTrigger(node.path, node.pathName)"><i class="fa fa-circle"></i> Not Selected</span>
				</div>
			</div>
		</td>
	</tr></script> <script type="text/ng-template" id="TriggerComponent.html"><tr tt-node is-branch="hasChildren(node)">
		<td class="col-md-3">
			<span class="label label-component label-icon">C</span> {{node.position}}. {{::node.name}}
		</td>
		<td class="col-md-1">
			{{::node.usage}}
		</td>
		<td class="col-md-1">
		</td>
		<td class="col-md-1">
			{{::node.datatypeId}}
		</td>
		<td class="col-md-1">
			[{{::node.min}}..{{::node.max}}]
		</td>
		<td class="col-md-1">
			<div ng-if="!hasChildren(node)">
				<div ng-if="isSelectedNodeForTrigger(node.path)">
					<span ng-click="unselectNodeForTrigger(node.path)"><i class="fa fa-check-circle"></i> Selected</span>
				</div>
				<div ng-if="!isSelectedNodeForTrigger(node.path)">
					<span ng-click="selectNodeForTrigger(node.path, node.pathName)"><i class="fa fa-circle"></i> Not Selected</span>
				</div>
			</div>
		</td>
	</tr></script> <script type="text/ng-template" id="FieldTree.html"><tr tt-node is-branch="hasChildren(node)">
		<td class="col-md-3">
			{{::getSegmentName()}}-{{::minimizePath(node.iPath)}}
        </td>
		<td class="col-md-3">
			{{::node.field.name}}
        </td>
		<td class="col-md-1" ng-if="isShow(1)">
			<div ng-if="!node.dt.ext">
				{{::node.dt.name}}
			</div>
			<div ng-if="node.dt.ext">
				{{::node.dt.name}}_{{::node.dt.ext}}
			</div>
        </td>
		<td class="col-md-1" ng-if="isShow(2)">
			<div ng-if="!node.predicate">
				{{::node.field.usage}}
			</div>
			<div ng-if="node.predicate">
				{{::node.field.usage}} ({{::node.predicate.trueUsage}}/{{::node.predicate.falseUsage}})
			</div>
        </td>
		<td class="col-md-1" ng-if="isShow(3)">
			[{{::node.field.min}}..{{::node.field.max}}]
        </td>
		<td class="col-md-1" ng-if="isShow(4)">
			[{{::node.field.minLength}}..{{::node.field.maxLength}}]
        </td>
		<td class="col-md-1" ng-if="isShow(5)">
			<div ng-repeat="t in node.bindingIdentifiers">
				<li>{{::t}}</li>
			</div>
		</td>
		<td class="col-md-1" ng-if="isShow(6)">
			<span>{{::node.predicate.description}}</span>
        </td>
		<td class="col-md-3">
			<div ng-hide="hasChildren(node)">
				<input ng-hide="hasChildren(node)" class="form-control" type="text" ng-change="recordChanged(selectedTestStep);updateValue(node);" ng-model="node.value"  ng-class="{'invalidValue':hasError(node.testDataCategorization,node.value, node.usagePath)}"/>
			</div>
        </td>
		<td class="col-md-3">
			<div ng-hide="hasChildren(node)">
				<select class="form-control" ng-model="node.testDataCategorization" ng-change="recordChanged(selectedTestStep); updateTestDataCategorization(node);" ng-options="testDataCategorization for testDataCategorization in testDataCategorizations">
					<option value="">No test data Cate.</option>
				</select>
				<div ng-if="node.testDataCategorization === 'Value-Test Case Fixed List'">
					<div ng-repeat="d in node.testDataCategorizationListData">
						<input ng-model="d" class="form-control form-control-short80" ng-change="recordChanged(selectedTestStep); updateTestDataCategorizationListData(node, d, $index, 'change');">
						<button title="Delete" type="button" class="btn btn-xs btn-danger no-margin" ng-click="recordChanged(selectedTestStep); updateTestDataCategorizationListData(node, d, $index, 'delete');"> <span><i class="fa fa-trash-o fa-fw"></i></span></button>
					</div>
					<input ng-model="newVTCFData" class="form-control form-control-short80">
					<button title="ADD" type="button" class="btn btn-xs btn-info no-margin" ng-click="recordChanged(selectedTestStep); updateTestDataCategorizationListData(node, newVTCFData, -1, 'add'); newVTCFData = '';"> <span><i class="fa fa-plus fa-fw"></i></span></button>
				</div>
			</div>
		</td>
		<td class="col-md-1" style="text-align:center;">
			<div ng-show="node.field.max !== '1' &&  node.field.max !== '0'">
				<input type="checkbox" ng-model="node.orderIndifferentInfo.orderIndifferent" ng-change="node.orderIndifferentInfo.orderSpecific = !node.orderIndifferentInfo.orderIndifferent; recordChanged(selectedTestStep);">
			</div>
		</td>
    </tr></script> <script type="text/ng-template" id="ComponentTree.html"><tr tt-node is-branch="hasChildren(node)">
		<td class="col-md-1">
			{{::getSegmentName()}}-{{::minimizePath(node.iPath)}}
        </td>
		<td class="col-md-1">
			{{::node.component.name}}
        </td>
		<td class="col-md-1" ng-if="isShow(1)">
			<div ng-if="!node.dt.ext">
				{{::node.dt.name}}
			</div>
			<div ng-if="node.dt.ext">
				{{::node.dt.name}}_{{::node.dt.ext}}
			</div>
        </td>
		<td class="col-md-1" ng-if="isShow(2)">
			<div ng-if="!node.predicate">
				{{::node.component.usage}}
			</div>
			<div ng-if="node.predicate">
				{{::node.component.usage}} ({{::node.predicate.trueUsage}}/{{::node.predicate.falseUsage}})
			</div>
        </td>
		<td class="col-md-1" ng-if="isShow(3)">
			[{{::node.component.min}}..{{::node.component.max}}]
        </td>
		<td class="col-md-1" ng-if="isShow(4)">
			[{{::node.component.minLength}}..{{::node.component.maxLength}}]
        </td>
		<td class="col-md-1" ng-if="isShow(5)">
			<div ng-repeat="t in node.bindingIdentifiers">
				<li>{{::t}}</li>
			</div>
		</td>
		<td class="col-md-1" ng-if="isShow(6)">
			<span>{{::node.predicate.description}}</span>
		</td>
		<td class="col-md-1">
			<div ng-hide="hasChildren(node)">
				<input ng-hide="hasChildren(node)" class="form-control" type="text" ng-change="recordChanged(selectedTestStep);updateValue(node);" ng-model="node.value"  ng-class="{'invalidValue':hasError(node.testDataCategorization,node.value,node.usagePath)}" />
			</div>
		</td>
		<td class="col-md-1">
			<div ng-hide="hasChildren(node)">
				<select class="form-control" ng-model="node.testDataCategorization" ng-change="recordChanged(selectedTestStep); updateTestDataCategorization(node);" ng-options="testDataCategorization for testDataCategorization in testDataCategorizations">
					<option value="">No test data Cate.</option>
				</select>
				<div ng-if="node.testDataCategorization === 'Value-Test Case Fixed List'">
					<div ng-repeat="d in node.testDataCategorizationListData">
						<input ng-model="d" class="form-control form-control-short80" ng-change="recordChanged(selectedTestStep); updateTestDataCategorizationListData(node, d, $index, 'change');">
						<button title="Delete" type="button" class="btn btn-xs btn-danger no-margin" ng-click="recordChanged(selectedTestStep); updateTestDataCategorizationListData(node, d, $index, 'delete');"> <span><i class="fa fa-trash-o fa-fw"></i></span></button>
					</div>
					<input ng-model="newVTCFData" class="form-control form-control-short80">
					<button title="ADD" type="button" class="btn btn-xs btn-info no-margin" ng-click="recordChanged(selectedTestStep); updateTestDataCategorizationListData(node, newVTCFData, -1, 'add'); newVTCFData = '';"> <span><i class="fa fa-plus fa-fw"></i></span></button>
				</div>
			</div>
		</td>
		<td class="col-md-1"/>
    </tr></script> <script type="text/ng-template" id="SubComponentTree.html"><tr tt-node is-branch="hasChildren(node)">
		<td class="col-md-1">
			{{::getSegmentName()}}-{{::minimizePath(node.iPath)}}
        </td>
		<td class="col-md-1">
			{{::node.component.name}}
        </td>
		<td class="col-md-1" ng-if="isShow(1)">
			<div ng-if="!node.dt.ext">
				{{::node.dt.name}}
			</div>
			<div ng-if="node.dt.ext">
				{{::node.dt.name}}_{{::node.dt.ext}}
			</div>
        </td>
		<td class="col-md-1" ng-if="isShow(2)">
			<div ng-if="!node.predicate">
				{{::node.component.usage}}
			</div>
			<div ng-if="node.predicate">
				{{::node.component.usage}} ({{::node.predicate.trueUsage}}/{{::node.predicate.falseUsage}})
			</div>
        </td>
		<td class="col-md-1" ng-if="isShow(3)">
			[{{::node.component.min}}..{{::node.component.max}}]
        </td>
		<td class="col-md-1" ng-if="isShow(4)">
			[{{::node.component.minLength}}..{{::node.component.maxLength}}]
        </td>
		<td class="col-md-1" ng-if="isShow(5)">
			<div ng-repeat="t in node.bindingIdentifiers">
				<li>{{::t}}</li>
			</div>
        </td>
		<td class="col-md-1" ng-if="isShow(6)">
			<span>{{::node.predicate.description}}</span>
		</td>
		<td class="col-md-1">
			<div ng-hide="hasChildren(node)">
				<input ng-hide="hasChildren(node)" class="form-control" type="text" ng-change="recordChanged(selectedTestStep);updateValue(node);" ng-model="node.value"  ng-class="{'invalidValue':hasError(node.testDataCategorization,node.value,node.usagePath)}"/>
			</div>
		</td>
		<td class="col-md-1">
			<div ng-hide="hasChildren(node)">
				<select class="form-control" ng-model="node.testDataCategorization" ng-change="recordChanged(selectedTestStep); updateTestDataCategorization(node);" ng-options="testDataCategorization for testDataCategorization in testDataCategorizations">
					<option value="">No test data Cate.</option>
				</select>
				<div ng-if="node.testDataCategorization === 'Value-Test Case Fixed List'">
					<div ng-repeat="d in node.testDataCategorizationListData">
						<input ng-model="d" class="form-control form-control-short80" ng-change="recordChanged(selectedTestStep); updateTestDataCategorizationListData(node, d, $index, 'change');">
						<button title="Delete" type="button" class="btn btn-xs btn-danger no-margin" ng-click="recordChanged(selectedTestStep); updateTestDataCategorizationListData(node, d, $index, 'delete');"> <span><i class="fa fa-trash-o fa-fw"></i></span></button>
					</div>
					<input ng-model="newVTCFData" class="form-control form-control-short80">
					<button title="ADD" type="button" class="btn btn-xs btn-info no-margin" ng-click="recordChanged(selectedTestStep); updateTestDataCategorizationListData(node, newVTCFData, -1, 'add'); newVTCFData = '';"> <span><i class="fa fa-plus fa-fw"></i></span></button>
				</div>
			</div>
		</td>
		<td class="col-md-1"/>
    </tr></script> <script type="text/ng-template" id="SpecificTriggerEditModal.html"><div class="modal-header">
		<h3 class="modal-title">Edit Secondary Trigger Conditions</h3>
	</div>
	<div class="modal-body">
		<uib-accordion close-others="true">
			<uib-accordion-group ng-repeat="seg in relatedSegmentList" is-open="activeTab[$index]">
				<uib-accordion-heading>
					<span style="color:white !important;">
						<i class="fa" ng-class="{'fa-caret-down': activeTab[$index], 'fa-caret-right': !activeTab[$index]}"></i>
						<i class="fa fa-file-text-o fa-fw"></i> {{seg.iPath}}
					</span>
				</uib-accordion-heading>
				<div class="col-md-12">
					<div class="table-responsive">
						<table class="table table-bordered table-condensed profile-table">
							<thead>
							<tr class="tbl-header">
								<th class="col-md-3">Path</th>
								<th class="col-md-1">Datatype</th>
								<th class="col-md-3">Value</th>
								<th class="col-md-1">Usage</th>
								<th class="col-md-3">TestData Cate.</th>
								<th class="col-md-1">Trigger</th>
							</tr>
							</thead>
							<tbody>
							<tr ng-if="seg.parsingResult" ng-repeat="item in seg.parsingResult">
								<td>{{seg.segmentName}}-{{item.path}}</td>
								<td>
									{{item.dt}}
								</td>
								<td>
									{{item.value}}
								</td>
								<td>
									{{item.usage}}
								</td>
								<td>
									<p ng-if="item.td">{{item.td.testDataCategorization}}</p>
								</td>
								<td>
									<input ng-if="item.td
									&& item.td.testDataCategorization
									&& (item.td.testDataCategorization === 'Value-Test Case Fixed'
									|| item.td.testDataCategorization === 'Value-Test Case Fixed List')" type="checkbox" ng-model="item.isTrigger">
								</td>
							</tr>
							</tbody>
						</table>
					</div>
				</div>
			</uib-accordion-group>
		</uib-accordion>
	</div>

	<div class="modal-footer">
		<md-button class="btn btn-default btn-sm" ng-click="showHelp()">
			<i class="fa fa-question fa-fw">&nbsp; </i> Show Help
		</md-button>
		<button class="btn btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
		</button>
		<button class="btn btn-info btn-sm" ng-click="saveTrigger()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Save</span>
		</button>
	</div></script> <script type="text/ng-template" id="TriggerEditModal.html"><div class="modal-header">
		<h3 class="modal-title">Edit Trigger</h3>
	</div>
	<div class="modal-body">
		<div class="table-responsive">
			<table tt-table tt-params="triggerParams" class="table table-bordered table-condensed profile-table" id="triggerTable">
				<thead>
				<tr class="tbl-header">
					<th class="col-md-2">Name</th>
					<th class="col-md-1">Usage</th>
					<th class="col-md-1">Cardi.</th>
					<th class="col-md-1">Datatype</th>
					<th class="col-md-1">Length</th>
					<th class="col-md-1">Selection</th>
				</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>

		<div ng-if="selectedNode.orderIndifferentInfo.triggerInfo && selectedNode.orderIndifferentInfo.triggerInfo.description">
			<label>Trigger: </label> {{selectedNode.orderIndifferentInfo.triggerInfo.description}}
		</div>

	</div>
	<div class="modal-footer">
		<md-button class="btn btn-default btn-sm" ng-click="showHelp()">
			<i class="fa fa-question fa-fw">&nbsp; </i> Show Help
		</md-button>
		<button class="btn btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
		</button>
		<button class="btn btn-info btn-sm" ng-click="saveTrigger()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Save</span>
		</button>
	</div></script> <script type="text/ng-template" id="MessageTemplateCreationModal.html"><div class="modal-header">
		<h3 class="modal-title">Set Name of Message Template</h3>
	</div>
	<div class="modal-body">
		<div class="row" style="margin:12px">
			<div class="col-md-2">
				<label class="control-label">Name:</label>
			</div>
			<div class="col-md-10">
				<input class="form-control" type="text" ng-change="recordChanged(selectedTestStep)" name="name" ng-model="newMessageTemplate.name" required />
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<button class="btn btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
		</button>
		<button class="btn btn-info btn-sm" ng-click="createMessageTemplate()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Create</span>
		</button>
	</div></script> <script type="text/ng-template" id="SegmentTemplateCreationModal.html"><div class="modal-header">
		<h3 class="modal-title">Set Name of Segment Template</h3>
	</div>
	<div class="modal-body">
		<div class="row" style="margin:12px">
			<div class="col-md-2">
				<label class="control-label">Name:</label>
			</div>
			<div class="col-md-10">
				<input class="form-control" type="text" ng-change="recordChanged(selectedTestStep)" name="name" ng-model="newSegmentTemplate.name" required />
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<button class="btn btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
		</button>
		<button class="btn btn-info btn-sm" ng-click="createSegmentTemplate()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Create</span>
		</button>
	</div></script> <script type="text/ng-template" id="Er7SegmentTemplateCreationModal.html"><div class="modal-header">
		<h3 class="modal-title">Set Name of Segment Template</h3>
	</div>
	<div class="modal-body">
		<div class="row" style="margin:12px">
			<div class="col-md-2">
				<label class="control-label">Name:</label>
			</div>
			<div class="col-md-10">
				<input class="form-control" type="text" ng-change="recordChanged(selectedTestStep)" name="name" ng-model="newEr7SegmentTemplate.name" required />
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<button class="btn btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
		</button>
		<button class="btn btn-info btn-sm" ng-click="createEr7SegmentTemplate()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Create</span>
		</button>
	</div></script> <script type="text/ng-template" id="Er7TemplateCreationModal.html"><div class="modal-header">
		<h3 class="modal-title">Set Name of ER7 Template</h3>
	</div>
	<div class="modal-body">
		<div class="row" style="margin:12px">
			<div class="col-md-2">
				<label class="control-label">Name:</label>
			</div>
			<div class="col-md-10">
				<input class="form-control" type="text" ng-change="recordChanged(selectedTestStep)" name="name" ng-model="newEr7Template.name" required />
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<button class="btn btn-default btn-sm" ng-click="cancel()"><span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
		</button>
		<button class="btn btn-info btn-sm" ng-click="createEr7Template()"><span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Create</span>
		</button>
	</div></script> <script type="text/ng-template" id="validation.html"><uib-tabset active="active">
				<uib-tab ng-repeat="(key, value) in validationResult.detections" ng-if="key!=='Affirmative'">
     			 <uib-tab-heading>
        				 {{key}}s
     			 </uib-tab-heading>
				<uib-tabset active="active">
				<uib-tab>
     				 <uib-tab-heading>
        				<span class="badge">{{getAllValue(validationResult.detections[key]).length}}</span> All
     			 	</uib-tab-heading>
    			 	<table class="table table-striped table-bordered">
     			 <thead class="tbl-header" style="background-color: #4c70bb !important;">
     			 	<th>Path</th>
     			 	<th>Description</th>
     			 	<th>Line#</th>
     			 </thead>
     			 <tbody>
     			 
     			 	<tr ng-repeat="const in getAllValue(validationResult.detections[key])">
     			 		<td>{{const.path}}</td>
     			 		<td>{{const.description}}</td>
     			 		<td>{{const.line}}</td>
     			 	</tr>
     			 </tbody>
     			 </table>
 			 	</uib-tab>
					<uib-tab ng-repeat="(key, value) in validationResult.detections[key]">
     				 <uib-tab-heading>
        				<span class="badge">{{value.length}}</span> {{key}}
     			 	</uib-tab-heading>
    			 	<table class="table table-striped table-bordered">
     			 <thead class="tbl-header" style="background-color: #4c70bb !important;">
     			 	<th>Path</th>
     			 	<th>Description</th>
     			 	<th>Line#</th>
     			 </thead>
     			 <tbody>
     			 
     			 	<tr ng-repeat="const in value">
     			 		<td>{{const.path}}</td>
     			 		<td>{{const.description}}</td>
     			 		<td>{{const.line}}</td>
     			 	</tr>
     			 </tbody>
     			 </table>
 			 	</uib-tab>
  				</uib-tabset>
  				</uib-tab>
  				</uib-tabset>
  				</div></script> <script type="text/ng-template" id="validationInfo.html"><div class="modal-header ng-scope">
                <span style="font-weight: bold; font-size: 20px">
                    Validation Result Information
                </span>
                <span class="pull-right">
                     <button class="btn btn-xs btn-primary" ng-click="close()"><i class="fa fa-times"></i>Close</button>
                </span>
    </div>
    <div class="modal-body">
        <div class="validation-result-info-content">
	<h4>Classification of Validation Detections</h4>
	<hr>
	<table class="table table-striped table-bordered table-condensed">
		<thead style="background-color:#436BEC">
			<tr>
				<th>Category</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Errors</td>
				<td>
					Indicates non-conformance to a requirement. Errors do constitute a failed validation. An EHR Product will fail certification if any of the validation reports indicate an Error (unless the Error can be proved to be a false negative; NIST can be consulted to remediate).
				</td>
			</tr>
			
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Warnings</td>
				<td>
					Provides information about potential missing support for a requirement or recommendation. Warnings do not constitute a failed validation.
				</td>
			</tr>
			
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Alerts</td>
				<td>
					Provides information about how the validation verifies or does not verify requirements. For example, the specification may provide a value set binding to an element but the value set is empty. Therefore, the user is alerted to the fact that no meaningful validation can be performed. Alerts do not constitute a failed validation.
 				</td>
			</tr>
			
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Affirmatives</td>
				<td>
					Provides an indication of a positive outcome to a validation assertion. Affirmatives display only as user preference, not by default.
				</td>
			</tr>
		</tbody>
	</table>
</div>


<div style="margin-bottom: 20px">
	<h4>Detection Categories: Structure Validation</h4>
	<hr>
	<table class="table table-striped table-bordered table-condensed">
		<thead style="background-color:#436BEC">
			<tr>
				<th>Category</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">R-Usage</td>
				<td>Issued when "Required" element is missing.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">X-Usage</td>
				<td>Issued when a "Not Supported" element is present.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">W-Usage</td>
				<td>Issued when a HL7 withdrawn element is present.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">RE-Usage
				</td>
				<td>Issued when a "Required or Empty" element is missing.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Cardinality</td>
				<td>Issued when either the minimal or the maximal cardinality is violated.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Length</td>
				<td>Issued when the specified data element length is violated.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Format</td>
				<td>Issued when the data element format is violated. Format is derived from the data type.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Extra</td>
				<td>Issued when a complex element has extra children.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">UnescapedSeparator</td>
				<td>Issued when a primitive element contains un-escaped separators.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Unexpected</td>
				<td>Issued for an unexpected segment at a specific position in the message.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">InvalidContent</td>
				<td>Issued for every line in the message instance which doesn't represent a valid segment definition.</td>
			</tr>
		</tbody>
	</table>
</div>


<div style="margin-bottom: 20px">
	<h4>Detection Categories: Content Validation</h4>
	<hr>
	<table class="table table-striped table-bordered table-condensed">
		<thead style="background-color:#436BEC">
			<tr>
				<th>Category</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Constraint Failure</td>
				<td>Issued for a failed constraint verification (associated with conformance statements).</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Content Failure</td>
				<td>Issued when content does not conform to test case specific data content constraints. <span style="color:red">See Test Data Categories for sub-categories and details.</span></td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Predicate Failure</td>
				<td>Issued for a failed predicate constraint verification. In essence is a Usage (R, X, W, RE) constraint failure where usage is determined by a conditional..</td>
			</tr>
		</tbody>
	</table>
</div>


<div style="margin-bottom: 20px">
	<h4>Detection Categories: Value Set Validation</h4>
	<hr>
	<table class="table table-striped table-bordered table-condensed">
		<thead style="background-color:#436BEC">
			<tr>
				<th>Category</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">EVS</td>
				<td>Issued when the code is in the value set but the usage is "E" (Excluded).</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">PVS</td>
				<td>Issued when the code is in the value set but the usage is "P" (Permitted).</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Code Not Found</td>
				<td>Issued when the code cannot be found in the value set.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">VS Not Found</td>
				<td>Issued when the value set cannot be found in the value set library.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">Empty VS</td>
				<td>Issued when the value set is empty.</td>
			</tr>
			<tr>
				<td style="background-color:rgb(198, 222, 255)">VS No Validation</td>
				<td>Issued when an excluded value set is encountered, i.e., the entire value set has been excluded from validation for one reason or another.</td>
			</tr>
		</tbody>
	</table>
</div></div><!-- end ngIf: appInfo.validationResultInfo != null -->
            <!-- ngIf: appInfo.validationResultInfo == null</script> <script type="text/ng-template" id="reportResult.html"><div>
		<div class="modal-header ng-scope">
			<span style="font-weight: bold; font-size: 20px">Validation Report</span>
			<span class="pull-right">
				<button class="btn btn-xs btn-primary" ng-click="close()"><i class="fa fa-times"></i>Close</button>
			</span>
		</div>
		<br/>
		<div style="padding: center; max-height: 500px;	margin-left: 10px; overflow-y: scroll;">
			<ng-bind-html ng-bind-html="report"/>
		</div>
	</div></script> <script type="text/ng-template" id="OpenApplySegmentTemplate.html"><div class="modal-header">
		<h3 class="modal-title">Apply Template</h3>
	</div>
	<div class="modal-body">
		<form style="width:100%">
    		<select class="form-control" ng-model="option">
				<option value="Apply">Apply: If template's Data Categorization is empty, use existing Data Categorization.</option>
      			<option value="Override">Override: If template's Data Categorization is empty, make Data Categorization empty.</option>
			</select>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn btn-default btn-sm" ng-click="cancel()">
			<span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
		</button>
		<button class="btn btn-info btn-sm" ng-click="apply()">
			<span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Apply</span>
		</button>
	</div></script> <script type="text/ng-template" id="OpenApplyMessageTemplate.html"><div class="modal-header">
		<h3 class="modal-title">Apply Template</h3>
	</div>
	<div class="modal-body">
		<form style="width:100%">
			<select class="form-control" ng-model="option">
      			<option value="Apply">Apply: If template's Data Categorization is empty, use existing Data Categorization.</option>
      			<option value="Override">Override: If template's Data Categorization is empty, make Data Categorization empty.</option>
    		</select>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn btn-default btn-sm" ng-click="cancel()">
			<span><i class="fa fa-times fa-fw">&nbsp; </i>Cancel</span>
		</button>
		<button class="btn btn-info btn-sm" ng-click="apply()">
			<span><i class="fa fa-trash-o fa-fw">&nbsp; </i>Apply</span>
		</button>
	</div></script>